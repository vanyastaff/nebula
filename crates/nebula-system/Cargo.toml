[package]
name = "nebula-system"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
documentation.workspace = true
description = "Cross-platform system information and utilities for Nebula ecosystem"
readme = "README.md"
categories = ["os", "api-bindings", "hardware-support"]
keywords = ["system", "cpu", "memory", "hardware", "cross-platform"]

[features]
default = ["sysinfo", "memory"]

# Core features
sysinfo = ["dep:sysinfo"]      # System information
memory = ["region", "libc"]    # Memory management

# Sysinfo sub-features (правильные названия для 0.31)
process = ["sysinfo/system"]    # Process information
network = ["sysinfo/network"]     # Network information
disk = ["sysinfo/disk"]          # Disk information
component = ["sysinfo/component"] # Temperature sensors

# Optional features
metrics = []                           # Metrics collection
async = ["tokio"]                     # Async support
serde = ["dep:serde", "serde_json"]  # Serialization support

# Preset combinations
full = ["sysinfo", "memory", "process", "network", "disk", "component", "metrics", "serde"]
minimal = ["memory"]

[dependencies]
# Internal dependencies

# Core dependencies
once_cell = "1.21"
parking_lot = "0.12"
thiserror = "2.0"
winapi = "0.3.9"

# Memory management
libc = { version = "0.2", optional = true }
region = { version = "3.0", optional = true }

# Optional dependencies
serde = { version = "1", optional = true, features = ["derive"] }
serde_json = { version = "1", optional = true }
tokio = { version = "1", optional = true, features = ["time", "sync"] }

# System info
sysinfo = { version = "0.37", optional = true, default-features = false, features = ["system", "multithread"] }

[dev-dependencies]
criterion = "0.7"
proptest = "1.6"
pretty_assertions = { workspace = true }
tempfile = { workspace = true }


[package.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]
targets = [
    "x86_64-unknown-linux-gnu",
    "x86_64-apple-darwin",
    "x86_64-pc-windows-msvc"
]



[[example]]
name = "basic"
required-features = ["sysinfo", "memory"]

[[example]]
name = "memory"
required-features = ["memory"]

[[example]]
name = "cpu"
required-features = ["sysinfo"]

[[example]]
name = "network"
required-features = ["network"]

[[example]]
name = "process"
required-features = ["process"]

[[example]]
name = "disk"
required-features = ["disk"]